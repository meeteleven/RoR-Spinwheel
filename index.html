<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌀RoR Spinwheel🌀</title>
  <style>
    body {
      font-family: "Montserrat", sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
      background-color: #f5f7fa;
    }

    .main-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .title-section {
      max-width: 600px;
      margin: 20px auto 40px;
      padding: 25px;
      background: linear-gradient(145deg, #ffffff, #f0f0f0);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .main-title {
      font-size: 2.2em;
      font-weight: 800;
      background: linear-gradient(45deg, #1E88E5, #1565C0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0;
    }

    @media (max-width: 400px) {
      .main-title {
        font-size: 1.8em;
      }
    }

    .spinning-emoji {
      display: inline-block;
      animation: spin 4s linear infinite;
      margin: 0 10px;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    h1 {
      font-weight: bold;
      margin-bottom: 20px;
    }

    label, input, button {
      font-size: 16px;
      margin-bottom: 10px;
      display: block;
    }

    /* Enhanced wheel and pointer styles */
    .wheel-container {
      position: relative;
      margin: 20px auto 60px;
      width: min(280px, 75vw);
      height: min(280px, 75vw);
      filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.2));
      transition: filter 0.3s ease;
      transform: translateX(-10px);
    }

    .wheel-container:hover {
      filter: drop-shadow(0 15px 25px rgba(0, 0, 0, 0.25));
    }

    #wheel {
      border-radius: 50%;
      box-shadow: 
        0 0 0 12px rgba(255, 255, 255, 0.8),
        0 0 0 13px rgba(0, 0, 0, 0.1),
        inset 0 0 25px rgba(0, 0, 0, 0.2);
      transition: transform 8s cubic-bezier(0.17, 0.67, 0.83, 0.67);
      transform-origin: center;
      will-change: transform;
    }

    .pointer {
      position: absolute;
      top: 50%;
      right: -40px;
      transform: translateY(-50%);
      width: 35px;
      height: 35px;
      background: linear-gradient(135deg, #ffd700, #ff6b6b);
      clip-path: polygon(0 50%, 100% 0, 100% 100%);
      z-index: 100;
      filter: drop-shadow(0 0 0 3px white) 
              drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
      animation: breathe 2s ease-in-out infinite;
      isolation: isolate;
    }

    .pointer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: inherit;
      clip-path: inherit;
      filter: blur(6px);
      opacity: 0.7;
      z-index: -1;
    }

    .pointer::after {
      content: '';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    @keyframes breathe {
      0%, 100% { transform: translateY(-50%) scale(1); }
      50% { transform: translateY(-50%) scale(1.1); }
    }

    @keyframes pointerPulse {
      0%, 100% { transform: translateY(-50%) scale(1); }
      50% { transform: translateY(-50%) scale(1.1); }
    }

    /* Enhanced Spin Button */
    #spin-btn {
      margin: 20px auto;
      display: block;
      margin-top: 15px;
      padding: 15px 40px;
      font-size: 1.2em;
      font-weight: 600;
      color: white;
      background: linear-gradient(45deg, #2196F3, #1976D2);
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 
        0 4px 15px rgba(33, 150, 243, 0.3),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      overflow: hidden;
      animation: buttonPulse 2s infinite;
    }

    #spin-btn:hover:not(:disabled) {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 
        0 6px 20px rgba(33, 150, 243, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
      background: linear-gradient(45deg, #1E88E5, #1565C0);
    }

    #spin-btn:active:not(:disabled) {
      transform: translateY(1px);
      box-shadow: 
        0 2px 10px rgba(33, 150, 243, 0.3),
        inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    #spin-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        120deg,
        transparent,
        rgba(255, 255, 255, 0.4),
        transparent
      );
      animation: shine 3s infinite;
    }

    @keyframes buttonPulse {
      0%, 100% {
        box-shadow: 
          0 4px 15px rgba(33, 150, 243, 0.3),
          inset 0 2px 4px rgba(255, 255, 255, 0.3);
      }
      50% {
        box-shadow: 
          0 4px 25px rgba(33, 150, 243, 0.5),
          inset 0 2px 4px rgba(255, 255, 255, 0.3);
      }
    }

    @keyframes shine {
      100% { left: 200%; }
    }

    /* Glowing Separator */
    .section-separator {
      width: 80%;
      max-width: 500px;
      margin: 50px auto;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(33, 150, 243, 0.8),
        rgba(66, 165, 245, 1),
        rgba(33, 150, 243, 0.8),
        transparent
      );
      position: relative;
      animation: separatorGlow 3s infinite;
    }

    @keyframes separatorGlow {
      0%, 100% {
        box-shadow: 
          0 0 10px rgba(33, 150, 243, 0.3),
          0 0 20px rgba(33, 150, 243, 0.2),
          0 0 30px rgba(33, 150, 243, 0.1);
        opacity: 1;
      }
      50% {
        box-shadow: 
          0 0 15px rgba(33, 150, 243, 0.4),
          0 0 25px rgba(33, 150, 243, 0.3),
          0 0 35px rgba(33, 150, 243, 0.2);
        opacity: 0.8;
      }
    }

    /* Section Titles */
    .section-title {
      text-align: center;
      font-size: 2em;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      max-width: 500px;
      padding: 0 10px;
    }

    .section-title .text {
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 2px;
      background: linear-gradient(45deg, #1976D2, #2196F3);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .section-title .emoji {
      font-size: 1.1em;
      animation: floatEmoji 3s ease-in-out infinite;
      background: none;
      -webkit-background-clip: unset;
      -webkit-text-fill-color: unset;
    }

    @keyframes floatEmoji {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    /* Prize list styling */
    #prize-list {
      max-width: 500px;
      margin: 0 auto;
      padding: 10px;
    }

    .prize-list-container {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      background: linear-gradient(145deg, #ffffff, #f0f0f0);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .prize-list-title {
      text-align: center;
      color: #333;
      font-size: 1.5em;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }

    .prize-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      padding: 10px;
    }

    .prize-item {
      display: flex;
      align-items: center;
      background: white;
      border-radius: 15px;
      padding: 15px;
      margin: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      word-break: break-word;
    }

    .prize-info {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1;
      position: relative;
      min-width: 0;
    }

    .prize-name {
      margin-right: 12px;
      font-size: 1.1em;
      font-weight: 600;
      letter-spacing: 0.3px;
      font-family: 'Montserrat', sans-serif;
      white-space: normal;
      overflow-wrap: break-word;
      flex: 1;
      min-width: 0;
    }

    .prize-color {
      min-width: 24px;
      min-height: 24px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      flex-shrink: 0;
    }

    .prize-probability {
      font-size: 0.9em;
      padding: 4px 8px;
      border-radius: 12px;
      margin-left: auto;
      background: #f0f0f0;
      min-width: 70px;
      text-align: right;
      flex-shrink: 0;
    }

    .prize-item.ultimate-prize-gold {
      background: linear-gradient(135deg, #ffd700, #ffa500);
      color: white;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      animation: shine 2s infinite;
      border: 2px solid #ffd700;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
    }

    .prize-item.ultimate-prize-rare {
      background: linear-gradient(135deg, #FF69B4, #ffffff, #FF69B4);
      background-size: 200% 200%;
      color: #333;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      animation: shine 3s infinite;
      border: 2px solid #FF69B4;
      box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
    }

    @keyframes shine {
      0% { background-position: 200% center; }
      50% { background-position: 0% center; }
      100% { background-position: -200% center; }
    }

    .prize-item.ultimate-prize-gold::before,
    .prize-item.ultimate-prize-rare::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        120deg,
        transparent,
        rgba(255, 255, 255, 0.6),
        transparent
      );
      animation: shine-effect 2s infinite;
    }

    @keyframes shine-effect {
      0% { left: -100%; }
      100% { left: 200%; }
    }

    .prize-item.ultimate-prize-gold .prize-probability,
    .prize-item.ultimate-prize-rare .prize-probability {
      background: rgba(255, 255, 255, 0.3);
      font-weight: bold;
    }

    .prize-item.ultimate-prize-gold .prize-probability {
      color: #B8860B;
    }

    .prize-item.ultimate-prize-rare .prize-probability {
      color: #FF1493;
    }

    .prize-item.ultimate-prize-gold .prize-name {
      font-weight: 700;
      color: #ffffff;
      text-shadow: 
        0 0 5px rgba(255, 215, 0, 0.5),
        0 0 10px rgba(255, 215, 0, 0.3);
      font-size: 1.15em;
      letter-spacing: 0.5px;
    }

    .prize-item.ultimate-prize-rare .prize-name {
      font-weight: 700;
      color: #ffffff;
      text-shadow: 
        0 0 5px rgba(255, 105, 180, 0.5),
        0 0 10px rgba(255, 105, 180, 0.3);
      font-size: 1.15em;
      letter-spacing: 0.5px;
    }

    .prize-item:not(.ultimate-prize-gold):not(.ultimate-prize-rare) .prize-name {
      color: #2c3e50;
    }

    /* Input section styling */
    .input-section {
      max-width: 600px;
      margin: 20px auto;
      padding: 25px;
      background: linear-gradient(145deg, #ffffff, #f0f0f0);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 40px;
    }

    .input-container {
      position: relative;
      margin: 20px 0;
      width: 100%;
      display: flex;
      justify-content: center;
    }

    .input-label {
      display: block;
      font-size: 1.4em;
      color: #1976D2;
      margin-bottom: 15px;
      font-weight: 600;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      padding-bottom: 10px;
    }

    .input-label::after {
      content: '🦌';
      display: inline-block;
      margin-left: 8px;
      animation: deerBounce 2s infinite ease-in-out;
    }

    @keyframes deerBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .input-label::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: linear-gradient(90deg, transparent, #1976D2, transparent);
      border-radius: 2px;
    }

    #name-input {
      width: 100%;
      max-width: 300px;
      padding: 12px 20px;
      font-size: 1.1em;
      border: 2px solid #e0e0e0;
      border-radius: 25px;
      outline: none;
      transition: all 0.3s ease;
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      color: #333;
      text-align: center;
      margin: 0 auto;
      box-shadow: 
        inset 0 2px 4px rgba(0,0,0,0.05),
        0 2px 4px rgba(33, 150, 243, 0.1);
    }

    #name-input:focus {
      border-color: #2196F3;
      box-shadow: 
        inset 0 2px 4px rgba(0,0,0,0.05),
        0 0 0 3px rgba(33, 150, 243, 0.2);
      transform: translateY(-1px);
    }

    #name-input::placeholder {
      color: #999;
      font-style: italic;
    }

    /* Separators */
    .winners-separator {
      width: 80%;
      max-width: 500px;
      margin: 50px auto;
      height: 3px;
      background: linear-gradient(90deg, transparent, #1976D2, #42A5F5, #1976D2, transparent);
      position: relative;
      opacity: 0.8;
    }

    .winners-separator::before {
      content: '🏆';
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 0 20px;
      font-size: 28px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .prize-pool-separator {
      width: 80%;
      max-width: 500px;
      margin: 50px auto;
      height: 3px;
      background: linear-gradient(90deg, transparent, #ffd700, #ff6b6b, #ffd700, transparent);
      position: relative;
      opacity: 0.9;
    }

    .prize-pool-separator::before {
      content: '🎰';
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 0 20px;
      font-size: 28px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    .prize-pool-separator::after,
    .winners-separator::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
      z-index: -1;
    }

    /* Winner's log card fixes */
    .winner-entry {
      display: flex;
      align-items: center;
      padding: 15px;
      margin: 10px 0;
      background: white;
      border-radius: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      word-break: break-word;
      overflow-wrap: break-word;
    }

    .winner-name, .winner-prize {
      margin: 0 10px;
      flex: 1;
      min-width: 0;
      overflow-wrap: break-word;
      word-break: break-word;
    }

    .winner-name {
      color: var(--prize-color, #1976D2);
      font-weight: 600;
      font-size: 1.1em;
      display: block;
      margin-bottom: 5px;
    }

    .winner-prize {
      color: #666;
      font-style: italic;
      font-weight: 600;
      font-size: 1.1em;
      display: block;
    }

    .prize-icon {
      margin-left: 15px;
      font-size: 1.5em;
      opacity: 0.8;
      z-index: 1;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .winner-entry.premium {
      background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,223,0,0.05));
      border: 1px solid rgba(255,215,0,0.4);
      animation: premiumShimmer 3s infinite;
      position: relative;
      overflow: hidden;
    }

    .winner-entry.premium::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(to bottom, #ffd700, #ffa500);
    }

    .winner-entry.premium::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
      animation: rotateGradient 8s linear infinite;
      pointer-events: none;
    }

    .winner-entry.premium .winner-name {
      background: linear-gradient(45deg, #ffd700, #ffa500);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }

    .winner-entry.premium .winner-prize {
      color: #8b7355;
    }

    .winner-entry.premium .prize-icon {
      font-size: 1.8em;
      animation: floatIcon 2s ease-in-out infinite;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
    }

    @keyframes premiumShimmer {
      0% { box-shadow: 0 4px 8px rgba(255,215,0,0.2); }
      50% { box-shadow: 0 8px 20px rgba(255,215,0,0.4); }
      100% { box-shadow: 0 4px 8px rgba(255,215,0,0.2); }
    }

    @keyframes rotateGradient {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes floatIcon {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .clear-button {
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
      margin-left: 10px;
      transition: all 0.3s ease;
      display: none;
    }

    .clear-button.visible {
      display: inline-block;
    }

    .admin-login {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 1.2em;
      cursor: pointer;
      opacity: 0.3;
      transition: opacity 0.3s ease;
    }

    .admin-login:hover {
      opacity: 1;
    }

    /* Enhanced Winner Message Styles */
    .prize-message {
      margin: 10px 0;
      font-size: 1.2em;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    #result[data-ultimate="true"] .prize-message {
      font-size: 1.4em;
      font-weight: 700;
      animation: prize-glow 2s infinite;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    #result[data-ultimate-rare="true"] .prize-message {
      font-size: 1.4em;
      font-weight: 700;
      animation: prize-glow-pink 2s infinite;
      text-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
      color: #4A0025;
    }

    .prize-message .emoji-container {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .prize-message .prize-text {
      margin: 0 10px;
      text-align: center;
    }

    @keyframes prize-glow {
      0%, 100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
      50% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6); }
    }

    @keyframes prize-glow-pink {
      0%, 100% { 
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.5),
                   0 0 20px rgba(255, 105, 180, 0.3); 
      }
      50% { 
        text-shadow: 0 0 20px rgba(255, 105, 180, 0.7),
                   0 0 30px rgba(255, 105, 180, 0.5); 
      }
    }

    /* Enhanced Winners Log Styles */
    .winner-entry {
      padding: 12px 15px;
      margin: 8px 0;
      border-radius: 10px;
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.2s ease;
    }

    .winner-entry.ultimate-winner-gold {
      background: linear-gradient(135deg, #ffd700, #ffa500);
      color: #3D2B00;
      box-shadow: 0 4px 8px rgba(255, 215, 0, 0.3);
      animation: winner-shine 2s infinite;
      border: 2px solid rgba(255, 215, 0, 0.5);
    }

    .winner-entry.ultimate-winner-rare {
      background: linear-gradient(135deg, #FF69B4, #ffffff, #FF69B4);
      background-size: 200% 200%;
      color: #333;
      box-shadow: 0 4px 8px rgba(255, 105, 180, 0.3);
      animation: winner-shine-pink 3s infinite;
      border: 2px solid rgba(255, 105, 180, 0.5);
    }

    @keyframes winner-shine {
      0% { background-position: 200% center; }
      50% { background-position: 0% center; }
      100% { background-position: -200% center; }
    }

    @keyframes winner-shine-pink {
      0% { background-position: 200% center; }
      50% { background-position: 0% center; }
      100% { background-position: -200% center; }
    }

    .winner-entry.ultimate-winner-gold .winner-name {
      font-weight: 700;
      font-size: 1.1em;
      color: #3D2B00;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
    }

    .winner-entry.ultimate-winner-rare .winner-name {
      font-weight: 700;
      font-size: 1.1em;
      color: #4A0025;
      text-shadow: 0 0 10px rgba(255, 105, 180, 0.3);
    }

    .winner-entry .prize-emoji {
      font-size: 1.3em;
      animation: emoji-bounce 1s infinite;
    }

    @keyframes emoji-bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }

    .winner-content {
      flex: 1;
      z-index: 1;
    }

    .winner-name {
      color: var(--prize-color, #1976D2);
      font-weight: 600;
      font-size: 1.1em;
      display: block;
      margin-bottom: 5px;
    }

    .winner-prize {
      color: #666;
      font-style: italic;
      font-weight: 600;
      font-size: 1.1em;
      display: block;
    }

    .prize-icon {
      margin-left: 15px;
      font-size: 1.5em;
      opacity: 0.8;
      z-index: 1;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .winner-entry.premium {
      background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,223,0,0.05));
      border: 1px solid rgba(255,215,0,0.4);
      animation: premiumShimmer 3s infinite;
      position: relative;
      overflow: hidden;
    }

    .winner-entry.premium::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: linear-gradient(to bottom, #ffd700, #ffa500);
    }

    .winner-entry.premium::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%);
      animation: rotateGradient 8s linear infinite;
      pointer-events: none;
    }

    .winner-entry.premium .winner-name {
      background: linear-gradient(45deg, #ffd700, #ffa500);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }

    .winner-entry.premium .winner-prize {
      color: #8b7355;
    }

    .winner-entry.premium .prize-icon {
      font-size: 1.8em;
      animation: floatIcon 2s ease-in-out infinite;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
    }

    @keyframes premiumShimmer {
      0% { box-shadow: 0 4px 8px rgba(255,215,0,0.2); }
      50% { box-shadow: 0 8px 20px rgba(255,215,0,0.4); }
      100% { box-shadow: 0 4px 8px rgba(255,215,0,0.2); }
    }

    @keyframes rotateGradient {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes floatIcon {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .clear-button {
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
      margin-left: 10px;
      transition: all 0.3s ease;
      display: none;
    }

    .clear-button.visible {
      display: inline-block;
    }

    .admin-login {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 1.2em;
      cursor: pointer;
      opacity: 0.3;
      transition: opacity 0.3s ease;
    }

    .admin-login:hover {
      opacity: 1;
    }

    /* Common section styling */
    .section-container {
      max-width: 500px;
      margin: 0 auto;
      padding: 10px;
      width: 100%;
    }

    /* Section Titles */
    .section-title {
      text-align: center;
      font-size: 2em;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      max-width: 500px;
      padding: 0 10px;
    }

    /* Prize list styling */
    #prize-list {
      max-width: 500px;
      margin: 0 auto;
      padding: 10px;
    }

    /* Winner's list styling */
    #winners-container {
      max-width: 500px;
      margin: 0 auto;
      padding: 12px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      max-height: 400px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #1976D2 #f0f0f0;
    }

    #winners-container::-webkit-scrollbar {
      width: 8px;
    }

    #winners-container::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 10px;
    }

    #winners-container::-webkit-scrollbar-thumb {
      background: #1976D2;
      border-radius: 10px;
    }

    #winners-container::-webkit-scrollbar-thumb:hover {
      background: #1565C0;
    }

    .winner-entry {
      background: #f8f9fa;
      border-radius: 6px;
      padding: 6px 10px;
      margin: 3px 2px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
      display: flex;
      flex-direction: column;
      gap: 3px;
      transition: all 0.2s ease;
    }

    .winner-info {
      display: flex;
      align-items: center;
      width: 100%;
      gap: 6px;
    }

    .winner-name-container {
      display: flex;
      align-items: center;
      gap: 4px;
      min-width: 0;
      flex: 0 1 auto;
    }

    .prize-emoji {
      font-size: 13px;
      line-height: 1;
      flex-shrink: 0;
    }

    .winner-name {
      font-size: 12px;
      font-weight: 600;
      color: #1976D2;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .winner-prize {
      font-size: 11px;
      color: #666;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      flex: 1;
    }

    .winner-timestamp {
      font-size: 10px;
      color: #999;
      align-self: flex-end;
    }

    @media (max-width: 480px) {
      .winner-entry {
        padding: 4px 8px;
        margin: 2px 1px;
      }

      .winner-info {
        flex-wrap: wrap;
        gap: 2px;
      }

      .winner-name-container {
        flex: 1 1 100%;
      }

      .winner-prize {
        font-size: 9px;
        white-space: normal;
        line-height: 1.2;
      }

      .winner-name {
        font-size: 10px;
        white-space: normal;
        line-height: 1.2;
      }

      .winner-timestamp {
        font-size: 8px;
        margin-top: 1px;
      }

      .prize-emoji {
        font-size: 10px;
      }
    }

    .ultimate-winner-gold {
      background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), rgba(255, 223, 0, 0.05));
    }

    .ultimate-winner-rare {
      background: linear-gradient(45deg, rgba(255, 105, 180, 0.1), rgba(255, 182, 193, 0.05));
    }

    /* Prize emoji animations */
    .winner-entry[data-prize-type="gold"] .emoji,
    .winner-entry[data-prize-type="pink"] .emoji {
      display: inline-block;
      animation: prizeEmoji 2s infinite;
      transform-origin: center;
    }

    @keyframes prizeEmoji {
      0%, 100% {
        transform: scale(1) rotate(0deg);
      }
      50% {
        transform: scale(1.2) rotate(15deg);
      }
    }

    #spin-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    #spin-btn[data-error]:disabled::after {
      content: attr(data-error);
      display: block;
      font-size: 0.7em;
      margin-top: 5px;
      color: #ff6b6b;
    }

    /* Floating banner styles */
    #result {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 15px 30px;
      border-radius: 15px;
      font-size: 1.2em;
      font-weight: 600;
      text-align: center;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      background: linear-gradient(45deg, #2196F3, #1976D2);
      color: white;
      max-width: 90vw;
      pointer-events: none;
    }

    #result.show-banner {
      opacity: 1;
      animation: floatIn 0.5s ease forwards;
    }

    #result.hide-banner {
      animation: floatOut 0.5s ease forwards;
    }

    /* Special prize styles */
    #result.ultimate-gold {
      background: linear-gradient(45deg, #ffd700, #ff9d00);
      animation: shimmerGold 2s infinite linear;
      background-size: 200% 200%;
    }

    #result.ultimate-rare {
      background: linear-gradient(45deg, #ff69b4, #ff1493);
      animation: shimmerPink 2s infinite linear;
      background-size: 200% 200%;
    }

    @keyframes floatIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -20px);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }

    @keyframes floatOut {
      0% {
        opacity: 1;
        transform: translate(-50%, 0);
      }
      100% {
        opacity: 0;
        transform: translate(-50%, -20px);
      }
    }

    @keyframes shimmerGold {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes shimmerPink {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    /* Prize emojis in banner */
    #result .prize-emoji {
      display: inline-block;
      margin: 0 5px;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
  <div class="main-container">
    <div class="title-section">
      <h1 class="main-title">RoR Spinwheel</h1>
    </div>
    <div class="input-section">
      <label for="name-input" class="input-label">Enter Your Name Deer</label>
      <div class="input-container">
        <input type="text" id="name-input" placeholder="Type your name here...">
      </div>
    </div>
    <div id="result" aria-live="polite"></div>

    <div class="wheel-container">
      <div class="pointer"></div>
      <canvas id="wheel" width="300" height="300"></canvas>
    </div>
    
    <button id="spin-btn" disabled>SPIN</button>

    <div class="section-separator"></div>

    <h2 class="section-title">
      <span class="emoji">🎮</span>
      <span class="text">Winner's List</span>
      <span class="emoji">🎯</span>
    </h2>
    <div id="winners-log">
      <div class="winners-header">
        <button class="clear-button" onclick="clearEntries()">Clear All Entries</button>
      </div>
      <div id="winners-container"></div>
    </div>

    <div class="section-separator"></div>

    <h2 class="section-title">
      <span class="emoji">🎲</span>
      <span class="text">Prize Pool</span>
      <span class="emoji">🎰</span>
    </h2>
    <div id="prize-list"></div>

    <div class="admin-login" onclick="adminLogin()">⚙️</div>

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAMDrAWHkRkQ2Ap8N6yodQHHb_Q0pNsWps",
        authDomain: "ror-spinwheel.firebaseapp.com",
        databaseURL: "https://ror-spinwheel-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "ror-spinwheel",
        storageBucket: "ror-spinwheel.firebasestorage.app",
        messagingSenderId: "834771668101",
        appId: "1:834771668101:web:2aa42314e9c841f01badec",
        measurementId: "G-47GG296S9Z"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database();

      const nameInput = document.getElementById("name-input");
      const spinButton = document.getElementById("spin-btn");
      const resultDiv = document.getElementById("result");
      const logTableBody = document.querySelector("#log-table tbody");
      const wheelCanvas = document.getElementById("wheel");
      const ctx = wheelCanvas.getContext("2d");
      const prizeListDiv = document.getElementById("prize-list");

      const prizes = [
        { name: "a Lovebite from Pengbee", color: "#1565C0", probability: 30 }, // Darker Blue
        { name: "Crab Army Sticker", color: "#42A5F5", probability: 10 }, // Light Blue
        { name: "25 Bonus Points", color: "#ffd700", probability: 1, isUltimate: true, ultimateClass: 'ultimate-prize-gold' },
        { name: "5 Bonus Points", color: "#90CAF9", probability: 7 }, // Very Light Blue
        { name: "a Kiss from King Crab", color: "#0D47A1", probability: 30 }, // Darkest Blue
        { name: "50 Bonus Points", color: "#FF69B4", probability: 0.0001, isUltimate: true, ultimateClass: 'ultimate-prize-rare' },
        { name: "Chetoes Sticker", color: "#2196F3", probability: 10 }, // Medium Blue
        { name: "3 Crab Army Stickers", color: "#ffd700", probability: 1, isUltimate: true, ultimateClass: 'ultimate-prize-gold' },
        { name: "2 Crab Army Stickers", color: "#42A5F5", probability: 3 }, // Light Blue
        { name: "10 Bonus Points", color: "#1976D2", probability: 3 }, // Dark Blue
        { name: "3 Bonus Points", color: "#64B5F6", probability: 8 }, // Lighter Blue
        { name: "7 Crab Army Stickers", color: "#FF69B4", probability: 0.0001, isUltimate: true, ultimateClass: 'ultimate-prize-rare' }
      ];

      function updateWinnerLog() {
        const winnersContainer = document.getElementById("winners-container");
        winnersContainer.innerHTML = '';
        
        database.ref('winners').orderByChild('timestamp').limitToLast(50).once('value')
          .then((snapshot) => {
            const entries = [];
            snapshot.forEach((childSnapshot) => {
              entries.unshift({
                name: childSnapshot.key,
                ...childSnapshot.val()
              });
            });
            
            entries.forEach((entry) => {
              const newRow = document.createElement("div");
              newRow.className = 'winner-entry';
              
              // Get prize details
              const prize = prizes.find(p => p.name === entry.prize);
              const isUltimateGold = prize && prize.ultimateClass === 'ultimate-prize-gold';
              const isUltimateRare = prize && prize.ultimateClass === 'ultimate-prize-rare';
              
              // Add ultimate class if it's an ultimate prize
              if (isUltimateGold) {
                newRow.classList.add('ultimate-winner-gold');
              } else if (isUltimateRare) {
                newRow.classList.add('ultimate-winner-rare');
              }
              
              // Get appropriate emoji based on prize
              let emoji = '🎉';
              let prizeType = '';
              
              if (entry.prize.includes('7 Crab Army Stickers')) {
                emoji = '💎💎💎';
                prizeType = 'pink';
              } else if (entry.prize.includes('50 Bonus Points')) {
                emoji = '💎💎💎';
                prizeType = 'pink';
              } else if (entry.prize.includes('Gold')) {
                emoji = '🏆';
                prizeType = 'gold';
              } else if (entry.prize.includes('Lovebite from Pengbee')) {
                emoji = '👅';
              } else if (entry.prize.includes('Crab Army Sticker') && !entry.prize.includes('3')) {
                emoji = '🦀';
              } else if (entry.prize.includes('25 Bonus Points')) {
                emoji = '💎';
              } else if (entry.prize.includes('5 Bonus Points')) {
                emoji = '💫';
              } else if (entry.prize.includes('Kiss from King Crab')) {
                emoji = '💋';
              } else if (entry.prize.includes('Chetoes Sticker')) {
                emoji = '🧀';
              } else if (entry.prize.includes('3 Crab Army Stickers')) {
                emoji = '💎';
              } else if (entry.prize.includes('10 Bonus Points')) {
                emoji = '🌟';
              } else if (entry.prize.includes('3 Bonus Points')) {
                emoji = '✨';
              } else if (entry.prize.includes('2 Crab Army Stickers')) {
                emoji = '🦀';
              }
              
              // Set the prize type as a data attribute
              if (prizeType) {
                newRow.setAttribute('data-prize-type', prizeType);
              }
              
              // Format the timestamp
              const timestamp = new Date(entry.timestamp);
              const formattedTime = timestamp.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
              });
              const formattedDate = timestamp.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric'
              });

              newRow.innerHTML = `
                <div class="winner-info">
                  <div class="winner-name-container">
                    <span class="prize-emoji">${emoji}</span>
                    <span class="winner-name">${entry.name}</span>
                  </div>
                  <div class="winner-prize">
                    won ${entry.prize}
                  </div>
                </div>
                <span class="winner-timestamp">${formattedDate} ${formattedTime}</span>
              `;
              
              winnersContainer.appendChild(newRow);
            });
          });
      }

      // Listen for real-time updates
      database.ref('winners').on('child_added', () => {
        updateWinnerLog();
      });

      // Load winners on page load
      window.addEventListener('load', updateWinnerLog);

      let isSpinning = false;
      let usedNames = new Set();
      let currentRotation = 0;

      nameInput.addEventListener("input", function() {
        const name = this.value.trim();
        spinButton.disabled = !name || isSpinning || usedNames.has(name.toLowerCase());
        
        if (usedNames.has(name.toLowerCase())) {
          spinButton.setAttribute('data-error', 'Cannot enter name twice');
        } else {
          spinButton.removeAttribute('data-error');
        }
      });

      async function spinWheel() {
        const name = nameInput.value.trim();
        if (!name || isSpinning || usedNames.has(name.toLowerCase())) return;
        
        isSpinning = true;
        spinButton.disabled = true;
        resultDiv.textContent = "";
        resultDiv.className = ""; // Reset classes
        
        // Store the name
        usedNames.add(name.toLowerCase());
        
        // Calculate spin rotation
        const randomIndex = weightedRandomIndex();
        const selectedPrize = prizes[randomIndex];
        
        // Calculate rotation to align the selected segment with the pointer
        const segmentAngle = 360 / prizes.length;
        const targetRotation = -(randomIndex * segmentAngle) + 80;
        
        // Add multiple full rotations plus the target rotation
        const spinDegrees = currentRotation + 3600 + (targetRotation - (currentRotation % 360));
        currentRotation = spinDegrees;
        
        // Apply the spin with transition
        wheelCanvas.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.83, 0.67)';
        wheelCanvas.style.transform = `rotate(${spinDegrees}deg)`;
        
        setTimeout(async () => {
          const timestamp = Date.now();
          await database.ref('winners').push({
            name: name,
            prize: selectedPrize.name,
            timestamp: timestamp
          });

          // Create banner content with emojis
          let bannerEmoji = '🎉';
          let bannerClass = 'show-banner';
          
          if (selectedPrize.ultimateClass === 'ultimate-prize-gold') {
            bannerEmoji = '🏆';
            bannerClass += ' ultimate-gold';
          } else if (selectedPrize.ultimateClass === 'ultimate-prize-rare') {
            bannerEmoji = '💎💎💎';
            bannerClass += ' ultimate-rare';
          }

          resultDiv.innerHTML = `
            <span class="prize-emoji">${bannerEmoji}</span>
            Congratulations ${name}!
            <span class="prize-emoji">${bannerEmoji}</span>
            <br>
            You won ${selectedPrize.name}!
          `;
          
          resultDiv.className = bannerClass;
          
          // Hide banner after 10 seconds
          setTimeout(() => {
            resultDiv.classList.add('hide-banner');
            setTimeout(() => {
              resultDiv.className = "";
              resultDiv.textContent = "";
            }, 500);
          }, 10000);
          
          isSpinning = false;
          nameInput.value = ''; // Clear the input
          spinButton.disabled = true;
          
          // Update the winners log
          updateWinnerLog();
        }, 4000);
      }

      spinButton.addEventListener("click", spinWheel);

      function weightedRandomIndex() {
        // Calculate total probability
        const totalProbability = prizes.reduce((sum, prize) => sum + prize.probability, 0);
        
        // Generate a random number between 0 and total probability
        const random = Math.random() * totalProbability;
        
        // Find the prize that corresponds to the random value
        let currentSum = 0;
        for (let i = 0; i < prizes.length; i++) {
          currentSum += prizes[i].probability;
          if (random <= currentSum) {
            return i;
          }
        }
        
        // Fallback to last prize (shouldn't normally happen due to rounding)
        return prizes.length - 1;
      }

      function drawWheel() {
        const segmentAngle = (2 * Math.PI) / prizes.length;
        
        ctx.clearRect(0, 0, wheelCanvas.width, wheelCanvas.height);

        prizes.forEach((prize, i) => {
          const startAngle = i * segmentAngle - Math.PI / 2;
          const endAngle = startAngle + segmentAngle;

          // Draw segment with special effects for ultimate prizes
          ctx.beginPath();
          ctx.moveTo(150, 150);
          ctx.arc(150, 150, 150, startAngle, endAngle);
          ctx.closePath();
          
          if (prize.isUltimate) {
            // Create gradient for ultimate prizes
            if (prize.ultimateClass === 'ultimate-prize-gold') {
              const gradient = ctx.createLinearGradient(0, 0, 300, 300);
              gradient.addColorStop(0, '#FFD700');
              gradient.addColorStop(1, '#FFA500');
              ctx.fillStyle = gradient;
            } else if (prize.ultimateClass === 'ultimate-prize-rare') {
              ctx.fillStyle = '#FF69B4';  // Solid hot pink for wheel segments
            } else {
              const gradient = ctx.createLinearGradient(0, 0, 300, 300);
              gradient.addColorStop(0, '#FF4444');
              gradient.addColorStop(1, '#CC0000');
              ctx.fillStyle = gradient;
            }
          } else {
            ctx.fillStyle = prize.color;
          }
          ctx.fill();

          // Add shine effect to segments
          ctx.save();
          ctx.clip();
          const shine = ctx.createLinearGradient(0, 0, 300, 0);
          shine.addColorStop(0, 'rgba(255, 255, 255, 0)');
          shine.addColorStop(0.5, 'rgba(255, 255, 255, 0.1)');
          shine.addColorStop(1, 'rgba(255, 255, 255, 0)');
          ctx.fillStyle = shine;
          ctx.fill();
          ctx.restore();

          // Add text with enhanced styling and wrapping
          ctx.save();
          ctx.translate(150, 150);
          ctx.rotate(startAngle + segmentAngle / 2);
          ctx.textAlign = "right";
          ctx.textBaseline = "middle";
          ctx.font = prize.isUltimate ? "bold 14px Montserrat" : "bold 12px Montserrat";
          ctx.fillStyle = "#FFFFFF";
          ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
          ctx.shadowBlur = 4;

          // Text wrapping logic
          const words = prize.name.split(' ');
          let line1 = '';
          let line2 = '';
          
          if (prize.name.length > 12) {
              // Find the middle space to split the text
              const midPoint = Math.floor(words.length / 2);
              line1 = words.slice(0, midPoint).join(' ');
              line2 = words.slice(midPoint).join(' ');
          } else {
              line1 = prize.name;
          }

          // Draw first line
          ctx.fillText(line1, 140, -8);
          // Draw second line if it exists
          if (line2) {
              ctx.fillText(line2, 140, 8);
          }

          ctx.restore();
        });
      }

      function populatePrizeList() {
        const prizeListDiv = document.getElementById("prize-list");
        prizeListDiv.innerHTML = '';
        
        prizes.forEach(prize => {
          const prizeItem = document.createElement("div");
          prizeItem.className = "prize-item";
          
          if (prize.isUltimate) {
            if (prize.ultimateClass === 'ultimate-prize-gold') {
              prizeItem.classList.add('ultimate-prize-gold');
            } else if (prize.ultimateClass === 'ultimate-prize-rare') {
              prizeItem.classList.add('ultimate-prize-rare');
            }
          }
          
          const probability = prize.probability < 1 ? prize.probability.toFixed(4) : prize.probability;
          
          prizeItem.innerHTML = `
            <div class="prize-info">
              <div class="prize-color" style="background-color: ${prize.color}"></div>
              <div class="prize-name">${prize.name}</div>
              <div class="prize-probability">${probability}%</div>
            </div>
          `;
          
          prizeListDiv.appendChild(prizeItem);
        });
      }

      // Admin password - you should change this to something secure
      const ADMIN_PASSWORD = 'kingcrab';
      let isAdmin = false;

      function adminLogin() {
        const password = prompt('Enter admin password:');
        if (password === ADMIN_PASSWORD) {
          isAdmin = true;
          document.querySelector('.clear-button').classList.add('visible');
        } else if (password !== null) {  // Only show error if user didn't click Cancel
          alert('Incorrect password');
        }
      }

      function clearEntries() {
        if (!isAdmin) {
          alert('Admin access required');
          return;
        }

        if (confirm('Are you sure you want to clear all entries? This cannot be undone.')) {
          database.ref('winners').remove()
            .then(() => {
              console.log('All entries cleared successfully');
              updateWinnerLog(); // Refresh the display
            })
            .catch((error) => {
              console.error('Error clearing entries:', error);
              alert('Error clearing entries. Please try again.');
            });
        }
      }

      drawWheel();
      populatePrizeList();
    </script>
  </div>
</body>
</html>
